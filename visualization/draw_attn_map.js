var dom = document.getElementById("chart-container");
var myChart = echarts.init(dom, null, {
  renderer: "svg",
  useDirtyRect: false,
  width: 400,
  height: 400
});
var app = {};

var option;

let n = 16;
let xData = [];
let yData = [];
for (let i = 0; i < n; i++) {
  xData.push(i);
  yData.push(i);
}
let attn_str =
  "[[0.8788126111030579, 0.0016406438080593944, 0.06710932403802872, 0.004263897426426411, 0.0025933189317584038, 0.003402050118893385, 0.006922530476003885, 0.019456995651125908, 0.0062178256921470165, 0.015315269120037556, 0.03212674707174301, 0.004479316063225269, 0.007697978522628546, 0.027043426409363747, 0.0024690963327884674, 0.002137981355190277], [0.0009061596356332302, 0.7761794924736023, 0.1543971449136734, 0.009048675186932087, 0.020141681656241417, 0.029526084661483765, 0.011097571812570095, 0.012884908355772495, 0.00927361287176609, 0.012243739329278469, 0.00900681409984827, 0.022722888737916946, 0.005361523013561964, 0.03479289636015892, 0.012438856065273285, 0.08207017928361893], [0.0017466514345976236, 0.0002479433151847399, 1.0688469842534687, 0.007463507589733354, 0.001605293120654494, 0.0004833334774079212, 0.008233856929606986, 0.0007028780335538443, 0.007001696444852712, 0.0040723038829959535, 0.0029775448773250446, 0.005903613153890319, 0.0015847964607296205, 0.027435964611299823, 0.00592853433012408, 0.009754221874658242], [0.006240956485271454, 0.023126935586333275, 0.07034981995820999, 0.8664637207984924, 0.004504411946982145, 0.01111411303281784, 0.01102650910615921, 0.011953801847994328, 0.05371077358722687, 0.011871572583913803, 0.010574028827250004, 0.020547455176711082, 0.0004440856573637575, 0.175362691283226, 0.03390471264719963, 0.0094262370839715], [0.0010311605874449015, 0.02795376069843769, 0.1130208969116211, 0.0033371937461197376, 0.8450623154640198, 0.0022485265508294106, 0.002110318513587117, 0.02202129177749157, 0.003541805548593402, 0.028469625860452652, 0.018571045249700546, 0.004163646139204502, 0.0034668331500142813, 0.005582805722951889, 0.010213649831712246, 0.02145424112677574], [0.002369755646213889, 0.035839930176734924, 0.04384864121675491, 0.006672742776572704, 0.002436375478282571, 0.8299168944358826, 0.013560757040977478, 0.010590814054012299, 0.015698466449975967, 0.005277557764202356, 0.0034660010132938623, 0.03885194659233093, 0.004687963984906673, 0.03693843260407448, 0.009188980795443058, 0.027338949963450432], [0.023130904883146286, 0.01279094722121954, 0.0849665030837059, 0.03571803495287895, 0.00498551782220602, 0.03137083351612091, 0.8618919253349304, 0.04021938517689705, 0.036329153925180435, 0.03588414192199707, 0.02186276763677597, 0.10732707381248474, 0.0030520150903612375, 0.1463947594165802, 0.021658102050423622, 0.01562037505209446], [0.021148813888430595, 0.014112702570855618, 0.03747202083468437, 0.006734993774443865, 0.035255685448646545, 0.0061265937983989716, 0.012820186093449593, 0.7361237406730652, 0.011641193181276321, 0.1172887459397316, 0.01199781522154808, 0.010136750526726246, 0.0035608652979135513, 0.030078601092100143, 0.011468722485005856, 0.01564655639231205], [0.006908451672643423, 0.010759697295725346, 0.008794872090220451, 0.020282020792365074, 0.0016240659169852734, 0.018486056476831436, 0.00395245011895895, 0.0048576220870018005, 0.8104649186134338, 0.004273473285138607, 0.0014115845551714301, 0.011645561084151268, 0.0004802565381396562, 0.09074924886226654, 0.023888150230050087, 0.0062051136046648026], [0.021690892055630684, 0.013135913759469986, 0.08947187662124634, 0.014609860256314278, 0.03288125619292259, 0.004589210730046034, 0.01595780998468399, 0.0882314145565033, 0.009144173003733158, 0.6900933980941772, 0.05134378373622894, 0.012647094205021858, 0.0013849444221705198, 0.02715323306620121, 0.010081798769533634, 0.007413757499307394], [0.01706647127866745, 0.004477806389331818, 0.08297174423933029, 0.015384082682430744, 0.02384004183113575, 0.0012707333080470562, 0.013762660324573517, 0.009829731658101082, 0.0008404566324315965, 0.05058322846889496, 0.787599503993988, 0.0033719069324433804, 0.008738463744521141, 0.002539134817197919, 0.0006432404043152928, 0.00038519810186699033], [0.005840173922479153, 0.0184653177857399, 0.08477823436260223, 0.011415667831897736, 0.0036321054212749004, 0.03596210479736328, 0.02527729421854019, 0.015790127217769623, 0.017622970044612885, 0.014140323735773563, 0.012803034856915474, 0.6591230034828186, 0.006513535976409912, 0.23026470839977264, 0.042457614094018936, 0.022921403869986534], [0.009954718872904778, 0.0020543213468044996, 0.07731907069683075, 0.0006166151142679155, 0.008702666498720646, 0.0015222936635836959, 0.006563377566635609, 0.009018083103001118, 0.0010838843882083893, 0.0029471400193870068, 0.031008129939436913, 0.004615800455212593, 0.9265958070755005, 0.005126488860696554, 0.0010938226478174329, 0.008150216192007065], [0.0055916410390821625, 0.002475696314618858, 0.33825404699427963, 0.004104300788121407, 0.00869682326154475, 0.004364524575084516, 0.007852472005964728, 0.006640365479704258, 0.013220099459587686, 0.004857473312469551, 0.006024048482267119, 0.025261386316088874, 0.03329852837907765, 0.11905052943461669, 0.03999577113944497, 0.07851492789257009], [0.0016195167554542422, 0.010983739048242569, 0.03871763497591019, 0.003427068702876568, 0.0034424145705997944, 0.009779607877135277, 0.004336055833846331, 0.00658507039770484, 0.010323473252356052, 0.005200877785682678, 0.002475754590705037, 0.0691925510764122, 0.0007666656747460365, 0.15076176822185516, 0.7972507476806641, 0.0111354049295187], [0.0032793963328003883, 0.04847895726561546, 0.04678221419453621, 0.002025473862886429, 0.010897984728217125, 0.014684800058603287, 0.010720720514655113, 0.012437053956091404, 0.014107278548181057, 0.006410918664187193, 0.005753074772655964, 0.0311750378459692, 0.0272490493953228, 0.037211835384368896, 0.02324245497584343, 0.7700943946838379]]";
let attn = JSON.parse(attn_str);

let data = [];
for (let i = 0; i < n; i++)
  for (let j = 0; j < n; j++)
    if (attn[i][j] < 0.2) {
      data.push([i, j, Math.pow(attn[i][j], 0.48)]);
    } else {
      data.push([i, j, attn[i][j]]);
    }

option = {
  tooltip: {},
  xAxis: {
    type: "category",
    data: xData
  },
  yAxis: {
    type: "category",
    data: yData
  },
  visualMap: {
    min: 0,
    max: 1,
    inRange: {
      color: ["lightgrey", "darkgreen"]
    }
  },
  grid: {
    left: 20,
    right: 5,
    top: 5,
    bottom: 20
  },
  series: [
    {
      name: "Gaussian",
      type: "heatmap",
      data: data,
      itemStyle: {
        borderColor: "white",
        borderWidth: 2
      },
      progressive: 1000,
      animation: false
    }
  ]
};

if (option && typeof option === "object") {
  myChart.setOption(option);
}

window.addEventListener("resize", myChart.resize);

if (option && typeof option === "object") {
  myChart.setOption(option);
}

window.addEventListener("resize", myChart.resize);
